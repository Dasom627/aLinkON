<!DOCTYPE html> <!--HTMLì„ ì“°ê¸°ë¡œ í•œë‹¤-->
<html lang="ko"> <!--ì–¸ì–´ëŠ” í•œêµ­ì–´ë¡œ í•œë‹¤-->
<head>
  <meta charset="UTF-8" /> <!--UTC-8ë¡œ í•œë‹¤-->
  <meta name="viewport" content="width=device-width, initial-scale=1" /> <!--ë³´ì—¬ì§€ëŠ” í™”ë©´ì„ ë””ë°”ì´ìŠ¤ í¬ê¸°ì— ë”± ë§ê²Œ ì„¤ëª…í•œë‹¤-->
  <title>LinkON â€“ ë¡œê·¸ì¸</title> <!--ë¶ë§ˆí¬ ë“±ì„ í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ìœ„ì— ìˆëŠ” ê¸€ìì´ë‹¤-->
  <link rel="stylesheet" href="../../CSS/Index/index.css"> <!--ê°™ì€ ì‹œíŠ¸ì— ìˆëŠ” CSSíŒŒì¼ì— ì—°ê²°í•œë‹¤-->
  <script>
  // ê°™ì€ ì„œë²„(Express)ì—ì„œ API ì“°ë©´ ë¹ˆ ë¬¸ìì—´ë¡œ OK
  window.API_BASE = "";
  const API = window.API_BASE || "";

  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("loginForm");
    const emailEl = document.getElementById("email");
    const pwEl = document.getElementById("password");
    const btnEl = document.getElementById("loginBtn") || document.querySelector('button[type="submit"]');

    // ì—ëŸ¬ ë°•ìŠ¤ ë³´ì¥
    let errEl = document.getElementById("loginError");
    if (!errEl && form) {
      errEl = document.createElement("div");
      errEl.id = "loginError";
      errEl.style.color = "#ef4444";
      errEl.style.marginTop = "8px";
      errEl.style.minHeight = "1.2em";
      form.appendChild(errEl);
    }

    if (!form) {
      console.error("[login] #loginForm not found");
      return;
    }

    function setBusy(b){ if (btnEl) btnEl.disabled = !!b; }
    async function safeJson(res){ try{ return await res.json(); } catch{ return {}; } }

    // ğŸ”¥ ìµœì¢… ì œì¶œ í•¸ë“¤ëŸ¬ (ì´ê²ƒë§Œ ë‚¨ê¸°ì„¸ìš”! ê³¼ê±° ì„ì‹œ guardëŠ” ì‚­ì œ)
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      if (errEl) errEl.textContent = "";
      setBusy(true);

      const email = (emailEl?.value || "").trim();
      const password = pwEl?.value || "";

      if (!email || !password) {
        if (errEl) errEl.textContent = "ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.";
        setBusy(false);
        return;
      }

      try {
        const res = await fetch(`${API}/api/login`, {
          method: "POST",
          headers: { "Content-Type":"application/json" },
          body: JSON.stringify({ email, password }),
          credentials: "include"   // ì¿ í‚¤ í¬í•¨
        });

        const data = await safeJson(res);
        if (res.ok && data.ok) {
          window.location.href = "/public/HTML/Home/home.html";
        } else {
          if (errEl) errEl.textContent = data.error || "ë¡œê·¸ì¸ ì‹¤íŒ¨";
        }
      } catch (err) {
        console.error(err);
        if (errEl) errEl.textContent = "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.";
      } finally {
        setBusy(false);
      }
    });
  });
</script>



</head>

<body>
  <main class="auth-layout"> <!--ë©”ì¸ ì½˜í…ì¸  ì˜ì—­-->
    <!-- ì™¼ìª½: ì„œë¹„ìŠ¤ ë¹„ì£¼ì–¼/ìŠ¬ë¡œê±´ -->
    <section class="visual"> <!--visual ì˜ì—­-->
      <div class="visual-card"> <!--ê·¸ ì¤‘ì—ì„œ ì¹´ë“œ ì˜ì—­-->
        <img src="/Images/IndexImage/lightbulb.png" alt="ì „êµ¬ ì´ë¯¸ì§€" /> <!--ì¹´ë“œ ì˜ì—­ì— ì´ë¯¸ì§€ ì‚¬ì§„-->
        <div class="slogan"> <!--ê·¸ë¦¬ê³  ìŠ¬ë¡œê±´ ì‚¬ì§„-->
          <h1>LinkON</h1> <!--ìŠ¬ë¡œê±´ ì‚¬ì§„ì˜ ì œëª©-->
          <p>ìë™ ì´ë ¥ì„œ Â· ë§ì¶¤ ì¶”ì²œ Â· ì„±ì¥ ë¡œë“œë§µ</p> <!--ìŠ¬ë¡œê±´ ì‚¬ì§„ì˜ í…ìŠ¤íŠ¸-->
        </div>
      </div>
    </section>

    <!-- ì˜¤ë¥¸ìª½: ë¡œê·¸ì¸ ì¹´ë“œ -->
    <section class="auth-card"> <!--auth-card ì˜ì—­-->
      <div class="card"> <!--ê·¸ ì¤‘ì—ì„œ ì¹´ë“œ ì˜ì—­-->
        <h2 class="logo">LinkON</h2> <!--ë¡œê³  ë¶€ë¶„-->
                
        <form id="loginForm" class="form" action="#" method="post"> <!--í¼ì´ë¼ëŠ” êµ¬ì—­ì„ ì •ì˜í•œë‹¤(actionì€ ë°ì´í„°ë¥¼ ë³´ë‚¼ ëª©ì ì§€ì¸ë° ì•„ì§ ì •ì˜í•˜ì§€ ì•Šì•˜ë‹¤)-->
          <label class="sr-only" for="email">ì´ë©”ì¼ ë˜ëŠ” ì „í™”ë²ˆí˜¸</label> <!--ì…ë ¥ì°½ì— ë¬´ì—‡ì„ ì…ë ¥í•´ì•¼í• ì§€ ì•Œë ¤ì¤€ë‹¤-->
          <input id="email" name="email" type="text" placeholder="ì´ë©”ì¼ ë˜ëŠ” ì „í™”ë²ˆí˜¸" autocomplete="username" required />
          <!--jsë¡œ ì „ì†¡í•˜ê¸° ìœ„í•œ idëª…, ì„œë²„ ì „ì†¡ ì‹œ ë³€ìˆ˜ëª…, ì•ˆë‚´ë¬¸, ìë™ì™„ì„± íŒíŠ¸, ë¹„ì–´ ìˆìœ¼ë©´ ì œì¶œ ë¶ˆê°€ë¡œ ê²½ê³ ì°½ì´ ëœ¨ëŠ” ê²ƒë“¤ì´ ìˆë‹¤-->

          <label class="sr-only" for="password">ë¹„ë°€ë²ˆí˜¸</label> <!--ì…ë ¥ì°½ì— ë¬´ì—‡ì„ ì…ë ¥í•´ì•¼í• ì§€ ì•Œë ¤ì¤€ë‹¤-->
          <input id="password" name="password" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" autocomplete="current-password" required />
          <!--jsë¡œ ì „ì†¡í•˜ê¸° ìœ„í•œ idëª…, ì„œë²„ ì „ì†¡ ì‹œ ë³€ìˆ˜ëª…, ì•ˆë‚´ë¬¸, ìë™ì™„ì„± íŒíŠ¸, ë¹„ì–´ ìˆìœ¼ë©´ ì œì¶œ ë¶ˆê°€ë¡œ ê²½ê³ ì°½ì´ ëœ¨ëŠ” ê²ƒë“¤ì´ ìˆë‹¤-->

          <button type="submit" class="btn primary">ë¡œê·¸ì¸</button> <!--ë°ì´í„°ë¥¼ ì„œë²„ë¡œ ì „ì†¡í•˜ê³ , ë¡œê·¸ì¸ ê¸€ìê°€ ë“¤ì–´ê°„ ë²„íŠ¼ì´ë‹¤-->
        </form>

        <div class="divider"><span>ë˜ëŠ”</span></div> <!--"ë˜ëŠ”" ì´ë¼ê³  ì‘ì€ ê¸€ìê°€ ë“¤ì–´ê°„ë‹¤"-->

        <button class="btn outline" type="button">Googleë¡œ ë¡œê·¸ì¸</button> <!--êµ¬ê¸€ë¡œ ë¡œê·¸ì¸ì„ í•  ìˆ˜ ìˆê²Œí•˜ëŠ” ë²„íŠ¼ì´ë‹¤-->

        <a class="link subtle" href="#">ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠìœ¼ì…¨ë‚˜ìš”?</a> <!--ê¸€ìë¥¼ ëˆ„ë¥´ë©´ í•˜ì´í¼ë§í¬ë¡œ ì—°ê²°ëœë‹¤ í•˜ì´í¼ë§í¬ì˜ í˜„ì¬ ì£¼ì†ŒëŠ” ë¹„ì–´ìˆë‹¤-->
      </div>

      <div class="card secondary"> <!--card secondaryêµ¬ì—­ì´ë‹¤-->
        <p>ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <a class="link" href="/HTML/Register/register.html">ê°€ì…í•˜ê¸°</a></p> <!--ê¸€ì "ê°€ì…í•˜ê¸°ë¥¼ ëˆ„ë¥´ë©´ í•˜ì´í¼ë§í¬ë¡œ ë“¤ì–´ê°€ì§„ë‹¤"-->
        <small>ê°€ì…ì„ í•˜ë©´ ì´ë ¥ì„œê°€ í•˜ë‚˜ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤!</small> <!--íšŒì›ê°€ì…ì„ í•˜ë©´ ì´ë ¥ì„œ í•˜ë‚˜ë¥¼ ì–»ì„ ìˆ˜ ìˆìŒì„ ì•Œë ¤ì¤€ë‹¤-->
      </div>

      <footer class="footer"> <!--ëì— ë¶€ë¶„ì˜ ê³µê°„ì„ ë§Œë“ ë‹¤-->
        <nav class="meta"> <!--ë‚´ë¹„ê²Œì´ì…˜ì„ ë§Œë“ ë‹¤-->
          <a href="#">ì†Œê°œ</a><a href="#">ë„ì›€ë§</a><a href="#">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a><a href="#">ì•½ê´€</a>
          <!--ë‚´ë¹„ê²Œì´ì…˜ì˜ ê¸€ìë“¤ì´ë‹¤ ê¸€ìë¥¼ ëˆ„ë¥´ë©´ í•˜ì´í¼ë§í¬ë¡œ ì—°ê²°ì´ ëœë‹¤-->
        </nav>
        <small>Â© 2025 LinkON</small> <!--ë” ì‘ê²Œ ê¸€ì í‘œì‹œ-->
      </footer>
    </section>
  </main>
</body>
</html>
